# NETWORK

参考文章:
[鸟哥基础网络概念](http://cn.linux.vbird.org/linux_server/0110network_basic.php)

## 关于网络

网络需要解决的问题便是沟通的问题, 但凡沟通问题即包括两个方面送达与理解, 即:
1. 需要知道信息送往何方(信封上的地址, 以及整个递送处理的体系)
2. 送出何种信息且对方是否能理解(信件内的内容)

如果从广义的方式来理解, tcp/ip是internet的实现基础, 但实现网络的方式并不只局限于此

## TCP/IP

对于计算机网络则需要解决以下两个问题(或者应该说在tcp/ip协议中)

1. 通讯寻路
2. 数据封装

寻路部分主要涉及ip, 路由与组网相关部分
数据封装则是对于数据封装相关的部分

* 组成

1. 链路层
2. 网络层
3. 传输层
4. 应用层

* OSI 七层协议
    1. 物理层
    2. 数据链路层
    3. 网络层
    4. 传输层
    5. 会话层
    6. 表现层
    7. 应用层

### 数据封装

#### IP封包

IP封包的大小最大为65535bytes

IP 封包的组成(IPv4)

1. version (4bits)
    IP封包版本

2. IHL(internet header length) (4bits)
    IP封包的表头长度

3. total length (16bits)
    IP封包总量 最多为65536bytes

4. identification (16bits)
    IP分段所属的IP封包标识

5. flags (3bits)
    封包标识, `0DM` D位若为0则表示可分段否则1表示不可分段, M位为0则为IP最后分段, 否则1为非最后分段

6. fragment offset (13bits)
    分段偏移

7. time to live(ttl) (8bits)
    表示该封包的存活时间

8. protocol number (8bits)
    封包协议名称

9. header checksum (16bits)
    表头检查码

10. source address (32bits)
    来源地址
    
11. destination adress (32bits)
    目标地址

12. options (19bits)
    其他参数 

13. padding (13bits)
    补齐

以上为32bits * 6 (192bits)

### 通讯寻路

#### IP

* IPv4 (32位)
* IPv6 (128位)
##### 组成与分级 (IPv4)

* A类: 以`0`开头的32位地址
* B类: 以`10`开头的32位地址
* C类: 以`110`开头的32位地址
* D类: 以`1110`开头的32位地址
* E类: 以`1111`开头的32位地址

私有IP

* A类: `10.0.0.0` - `10.255.255.255`
* B类: `172.16.0.0` - `172.31.255.255`
* C类: `192.168.0.0` - `192.168.255.255`

私有IP 只能限于内网中使用, 不得用于Internet
由于这样的性质内网ip无法被外网直接攻击, 但同时也无法被用于连接外网

#### 路由

##### 静态路由

当通讯双方ip不在同一网段时, 就需要借助路由来传递数据

通常这个过程主机和路由服务都会通过检索自己已知的路由设定并将信息发送至自己已知的或者预设的路由设定, 并且之后不再理会后续流向

##### 动态路由
